{
    "collab_server" : "",
    "contents" : "rm(list=ls(all.names=TRUE))\n# library(distcrete)\nlibrary(incidence)\nlibrary(projections)\nlibrary(epitrix)\nlibrary(EpiEstim)\n\ndat=c(1,2,3,4,4,5,5)\n## simulate basic epicurvedat <- c(0, 2, 2, 3, 3, 5, 5, 5, 6, 6, 6, 6)\ni <- incidence(dat)\nplot(i)\n\n# SI\nmean_SI <- 14.2\nCV_SI <- 9.6/14.2 # from http://www.nejm.org/doi/suppl/10.1056/NEJMc1414992/suppl_file/nejmc1414992_\n# params <- gamma_mucv2shapescale(mean_SI, CV_SI)\n# si <- distcrete(\"gamma\", interval = 1L,\n#                   shape = params$shape,\n#                   scale = params$scale, w = 0.5)\n# si$d(0:30) # problem of first one\nSItrunc <- 40\n# serial distribution\nSI_Distr <- sapply(0:SItrunc, function(e) DiscrSI(e,mean_SI,mean_SI*CV_SI) )\nSI_Distr <- SI_Distr / sum(SI_Distr)\n\n#simulate 40 days\npred <- project(x = i, R = 2, R_fix_within = TRUE,\n                si = SI_Distr, n_days = 100, n_sim = 5)\n\n\npred[]\n\n# keep incidence of last 20 days\nincidence <- data.frame(date = as.Date('01/05/2018',format='%d/%m/%Y')+seq(0,19),\n                        I = tail(pred,20))\nf <- which(colSums(incidence[,-1])==0) # remove location with 0 cases in last 20 days\nincidence <- incidence[,-(f+1)]\n\n# incidence <- incidence[,1:2]\n# I_cum_hist <- colSums(head(pred,150-20))\n\nsave(incidence, file = 'Robjects/simulated.RData')\n\n",
    "created" : 1527172148519.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2572193623",
    "id" : "D5E226CF",
    "lastKnownWriteTime" : 1526504576,
    "last_content_update" : 1526504576,
    "path" : "C:/Users/pn211/Dropbox (SPH Imperial College)/Rt_projection_2018/simulated_data.R",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}